# HTTPS ç«¯å£ 5075 è®¿é—®é—®é¢˜è§£å†³æŠ¥å‘Š

## ğŸ“‹ é—®é¢˜æè¿°
æ— æ³•é€šè¿‡ `https://tx.qsgl.net:5075/` è®¿é—®æœåŠ¡

## ğŸ” é—®é¢˜æ’æŸ¥è¿‡ç¨‹

### 1. ç«¯å£æ˜ å°„é—®é¢˜
**å‘ç°**: åˆå§‹ç«¯å£æ˜ å°„ä¸º `5075->8443`  
**é—®é¢˜**: å®¹å™¨å†…éƒ¨ç›‘å¬çš„æ˜¯ `https://[::]:5075`ï¼Œä¸æ˜¯ 8443  
**åŸå› **: ä¹‹å‰çš„éƒ¨ç½²å‘½ä»¤é”™è¯¯é…ç½®äº†ç«¯å£æ˜ å°„  

### 2. é•œåƒç‰ˆæœ¬é—®é¢˜  
**å‘ç°**: å®¹å™¨è¿è¡Œçš„æ˜¯æ—§ç‰ˆæœ¬çš„ latest é•œåƒï¼ˆID: 971fa7d32471ï¼‰  
**é—®é¢˜**: è¯¥é•œåƒä¸åŒ…å«è¯ä¹¦ç®¡ç†APIåŠŸèƒ½  
**åŸå› **: latest æ ‡ç­¾æ²¡æœ‰æ›´æ–°åˆ° cert-manager-v3 ç‰ˆæœ¬  

## âœ… è§£å†³æ–¹æ¡ˆ

### æ­¥éª¤ 1: ä¿®æ­£ç«¯å£æ˜ å°„
```bash
# ä»: -p 5075:8443  
# æ”¹ä¸º: -p 5075:5075
docker run -d --name dnsapi -p 5074:5074 -p 5075:5075 ...
```

### æ­¥éª¤ 2: ä½¿ç”¨æ­£ç¡®çš„é•œåƒç‰ˆæœ¬
```bash
# ä½¿ç”¨ cert-manager-v3 ç‰ˆæœ¬è€Œä¸æ˜¯æ—§çš„ latest
docker run ... 43.138.35.183:5000/dnsapi:cert-manager-v3
```

## ğŸ¯ éªŒè¯ç»“æœ

### TCP è¿æ¥æµ‹è¯•
```powershell
Test-NetConnection -ComputerName 43.138.35.183 -Port 5075
# ç»“æœ: TcpTestSucceeded = True âœ…
```

### HTTPS API æµ‹è¯•
```bash
curl -k https://43.138.35.183:5075/api/cert-manager/status
# è¿”å›: {"success":true,"summary":{...}} âœ…
```

### åŸŸåè®¿é—®æµ‹è¯•
```bash
curl -k https://tx.qsgl.net:5075/api/cert-manager/list
# è¿”å›: {"success":true,"count":2,...} âœ…
```

## ğŸ“Š å½“å‰é…ç½®

### å®¹å™¨é…ç½®
- **é•œåƒ**: `43.138.35.183:5000/dnsapi:cert-manager-v3`
- **å®¹å™¨å**: `dnsapi`
- **ç«¯å£æ˜ å°„**: 
  - `5074:5074` (HTTP)
  - `5075:5075` (HTTPS)

### è¯ä¹¦é…ç½®
- **è¯ä¹¦è·¯å¾„**: `/opt/shared-certs/qsgl.net.crt`
- **å¯†é’¥è·¯å¾„**: `/opt/shared-certs/qsgl.net.key`
- **è¯ä¹¦ç±»å‹**: ECDSA P-256
- **æœ‰æ•ˆæœŸ**: 2025-10-20 è‡³ 2026-01-18

### ç›‘å¬ç«¯ç‚¹
- `http://[::]:8080` (é—ç•™ç«¯å£)
- `http://[::]:5074` âœ…
- `https://[::]:5075` âœ…

## ğŸ”§ éœ€è¦æ³¨æ„çš„é—®é¢˜

### 1. 8080 ç«¯å£ä»åœ¨ç›‘å¬
è™½ç„¶è®¾ç½®äº† `ASPNETCORE_URLS=http://+:5074`ï¼Œä½†åº”ç”¨ä»ç„¶ç›‘å¬ 8080 ç«¯å£ã€‚
**å½±å“**: å¯èƒ½é€ æˆç«¯å£å†²çª
**å»ºè®®**: ä¿®æ”¹ appsettings.jsonï¼Œç§»é™¤ 8080 ç«¯å£é…ç½®

### 2. latest æ ‡ç­¾æœªåŒæ­¥
æœ¬åœ°çš„ latest æ ‡ç­¾(971fa7d32471) ä¸ cert-manager-v3(7a8e7f22605f) ä¸ä¸€è‡´ã€‚
**å½±å“**: å¯èƒ½éƒ¨ç½²åˆ°é”™è¯¯çš„ç‰ˆæœ¬
**å»ºè®®**: æ›´æ–° latest æ ‡ç­¾æŒ‡å‘ cert-manager-v3

## ğŸ“ åç»­å»ºè®®

### 1. æ›´æ–° latest æ ‡ç­¾
```bash
docker tag 43.138.35.183:5000/dnsapi:cert-manager-v3 43.138.35.183:5000/dnsapi:latest
docker push 43.138.35.183:5000/dnsapi:latest
```

### 2. æ¸…ç†æ—§é•œåƒ
```bash
# åˆ é™¤æœªä½¿ç”¨çš„é•œåƒ
docker images 43.138.35.183:5000/dnsapi --format "{{.ID}} {{.Tag}}" | grep "<none>" | awk '{print $1}' | xargs docker rmi
```

### 3. é…ç½®é˜²ç«å¢™è§„åˆ™ï¼ˆå¦‚éœ€è¦ï¼‰
```bash
# ç¡®ä¿5075ç«¯å£åœ¨äº‘æœåŠ¡å™¨å®‰å…¨ç»„ä¸­å¼€æ”¾
# è…¾è®¯äº‘æ§åˆ¶å° -> å®‰å…¨ç»„ -> æ·»åŠ å…¥ç«™è§„åˆ™
# ç«¯å£: 5075, åè®®: TCP, æ¥æº: 0.0.0.0/0
```

### 4. é…ç½® HTTPS è‡ªåŠ¨ç»­ç­¾
è¯ä¹¦ç®¡ç†æœåŠ¡å·²å†…ç½®è‡ªåŠ¨ç»­ç­¾åŠŸèƒ½ï¼Œæ¯6å°æ—¶æ£€æŸ¥ä¸€æ¬¡ã€‚
å¯é€šè¿‡ API æŸ¥çœ‹çŠ¶æ€ï¼š
```bash
curl -k https://tx.qsgl.net:5075/api/cert-manager/status
```

## âœ… é—®é¢˜è§£å†³ç¡®è®¤

- âœ… TCP 5075 ç«¯å£è¿æ¥æ­£å¸¸
- âœ… HTTPS æ¡æ‰‹æˆåŠŸ
- âœ… è¯ä¹¦ç®¡ç† API æ­£å¸¸å“åº”
- âœ… åŸŸåè®¿é—®æ­£å¸¸
- âœ… æµè§ˆå™¨å¯ä»¥è®¿é—®

**é—®é¢˜å·²å®Œå…¨è§£å†³ï¼**

---
**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-10-22  
**è§£å†³è€…**: GitHub Copilot  
**é•œåƒç‰ˆæœ¬**: cert-manager-v3  
**å®¹å™¨ID**: 8555e76ab907
